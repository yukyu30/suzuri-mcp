# SUZURI MCP Server テストリスト

## MCPサーバー基本機能

- [x] MCPハンドラーが正しく初期化される
- [x] MCPエンドポイント（/api/mcp）がGET/POST/DELETEに応答する

## OAuth2認証（SUZURI API連携）

### OAuth2フロー
- [x] OAuth2認可URLを生成できる
- [x] 認可コードからアクセストークンを取得できる
- [ ] アクセストークンをリフレッシュできる
- [x] トークンが無効な場合に適切なエラーを返す

### MCP OAuth対応
- [x] withMcpAuthでハンドラーをラップできる
- [x] /.well-known/oauth-protected-resource エンドポイントが正しく応答する
- [ ] 認証なしのリクエストに401を返す
- [ ] 有効なトークンでリクエストが成功する

## Suzuri APIクライアント

### get_items ツール
- [x] アイテム一覧を取得できる
- [x] limit パラメータで取得件数を制限できる
- [ ] offset パラメータでページネーションできる
- [x] APIエラー時に適切なエラーメッセージを返す

### get_products ツール
- [x] 商品一覧を取得できる
- [x] userId パラメータでユーザーの商品を絞り込める
- [x] itemId パラメータでアイテム種類を絞り込める
- [ ] limit/offset でページネーションできる
- [ ] APIエラー時に適切なエラーメッセージを返す

### get_user_info ツール（認証必須）
- [ ] ユーザー情報を取得できる
- [ ] 認証エラー時に適切なエラーメッセージを返す

### create_product ツール（認証必須・書き込みスコープ）
- [ ] 画像URLから商品を作成できる
- [ ] 認証エラー時に適切なエラーメッセージを返す
- [ ] スコープ不足時に適切なエラーメッセージを返す

## 環境変数・設定

- [ ] SUZURI_CLIENT_ID が設定されていない場合にエラーを返す
- [ ] SUZURI_CLIENT_SECRET が設定されていない場合にエラーを返す

## 統合テスト

- [ ] MCP Inspectorから接続してツールを呼び出せる
- [ ] Vercelにデプロイ後、正常に動作する
- [ ] OAuth2フローが正常に動作する
